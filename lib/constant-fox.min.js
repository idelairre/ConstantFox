!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fs"),require("path")):"function"==typeof define&&define.amd?define("constant-fox",["fs","path"],t):"object"==typeof exports?exports["constant-fox"]=t(require("fs"),require("path")):e["constant-fox"]=t(e.fs,e.path)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(2),e.exports=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.merge=t.isObject=t.isString=t.isNull=t.isBoolean=t.isNumeric=t.isEqual=t.checkProperty=t.isEmpty=t.convertBool=t.access=t.read=t.write=t.isChromeExtension=t.storageEnabled=t.isNode=t.isChrome=t.isBrowser=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(3),s=r(i),a=n(4),c=r(a),u=t.isBrowser=new Function("try {return !!window;}catch(e){return false;}"),f=t.isChrome=new Function("try {return ('chrome' in window);}catch(e){return false;}"),l=(t.isNode=new Function("try {return process.title;}catch(e){return false;}"),t.storageEnabled=new Function("try {return chrome.storage;}catch(e){return false;})"));t.isChromeExtension=function(){return u()&&f()&&l()},t.write=function(e,t){"string"!=typeof t&&(t=JSON.stringify(t));var n=c.default.join(process.cwd(),e);s.default.writeFileSync(n,t,"utf8")},t.read=function(e){return JSON.parse(s.default.readFileSync(c.default.join(process.cwd(),e)))},t.access=function(e){try{c.default.join(process.cwd(),e);if(s.default.statSync(e))return!0}catch(e){return!1}},t.convertBool=function(e){return!e.match(/false/)},t.isEmpty=function(e){return!(!Array.isArray(e)&&"string"!=typeof e||0!==e.length)||"object"===("undefined"==typeof e?"undefined":o(e))&&0===Object.keys(items).length},t.checkProperty=function(e,t){return{}.hasOwnProperty.call(e,t)},t.isEqual=function(e,t){if(e===t)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;if(Object.keys(e)===Object.keys(t)){for(var n in e){var r=e[n],o=t[n];if(r!==o)return!1}return!0}},t.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t.isBoolean=function(e){return e===!0||!(!e.match(/true/)&&!e.match(/false/))},t.isNull=function(e){return"null"===String(e)},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){try{if(JSON.parse(e))return!0}catch(e){return!1}},t.merge=function(e,t){for(var n=Object.assign({},e),r=Object.keys(t),o=r.length-1;o>=0;o--)"undefined"!=typeof t[r[o]]&&(n[r[o]]=t[r[o]]);return n}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(8),l=o(f),p=n(3),y=(o(p),n(4)),d=(o(y),n(5)),h=o(d),v=n(6),b=o(v),m=n(1),g=r(m),_=n(9),j=o(_);n(7);var w=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._previous={},n._defaults={},n._storage={local:{},sync:{}},n._env=null,n._initialized=!1,Object.assign(n._defaults,e),n.once("initialized",function(){n._storage.local.get(e,function(t){n.set(g.merge(e,t),null,{init:!0}),Object.assign(n._previous,n._defaults),n.emit("ready")})}),n._detectContext(n.initialize.bind(n)),n}return a(t,e),u(t,[{key:"initialize",value:function(){var e=this;this._initializeStorageValues(function(){return e._initialized?void e.emit("reset"):(e._initialized=!0,void e.emit("initialized"))})}},{key:"initialized",value:function(){return this._initialized}},{key:"getEnv",value:function(){return this._env}},{key:"_detectContext",value:function(e){if(g.isNode())this._storage=(0,h.default)(this),this._env="node";else if(g.isChromeExtension())this._storage.local=chrome.storage.local,this._env="chrome";else{if(!g.isBrowser())throw new Error("Cannot detect JavaScript context");this._storage=(0,b.default)(this),this._env="browser"}if(e)return e()}},{key:"clear",value:function(){this._storage.local.clear()}},{key:"default",value:function(e){if(this._defaults[e])return this._defaults[e];throw new Error('"'+e+'" does not have a default value')}},{key:"defaults",value:function(){return this._defaults}},{key:"get",value:function(e){if("object"===("undefined"==typeof e?"undefined":c(e))){for(var t={},n=e,r=Object.keys(n),o=r.length-1;o>=0;o--)"undefined"!=typeof this[r[o]]?t[r[o]]=this[r[o]]:(t[r[o]]=n[r[o]],this.set(r[o],n[r[o]]));return t}if("string"==typeof e)return this[e]}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n.init,n.silent),o=void 0!==r&&r,i=n.reset,s=void 0!==i&&i;if("object"===("undefined"==typeof e?"undefined":c(e)))this._assign(e),this._storage.local.set(e);else{this._previous[e]=this[e],this[e]=t;var a={};a[e]=t,this._storage.local.set(a)}s?this.emit("reset",this.toJSON()):o?Function.prototype():this.emit("change",this.toJSON())}},{key:"remove",value:function(e){return this._storage.local.remove(e)}},{key:"previous",value:function(e){return e?this._previous[e]:this._previous}},{key:"reset",value:function(e){"string"==typeof e?this.set(e,this._defaults[e],{reset:!0}):this.set(this._defaults,null,{reset:!0})}},{key:"toJSON",value:function(){for(var e={},t=Object.keys(this._defaults),n=t.length-1;n>=0;n--)e[t[n]]=this[t[n]];return Object.assign({},e)}},{key:"_assign",value:function(e){for(var t=Object.keys(e),n=t.length-1;n>=0;n--)this[t[n]]=e[t[n]],"undefined"==typeof this[t[n]]?this._previous[t[n]]=void 0:this._previous[t[n]]=this[t[n]]}},{key:"_initializeStorageValues",value:function(e){var t=this;this._storage.local.get(this._defaults,function(n){Object.assign(t,n),e&&e()})}}],[{key:"once",value:function(){return t.prototype.once.apply(t.prototype,arguments)}},{key:"on",value:function(){return t.prototype.on.apply(t.prototype,arguments)}},{key:"addListener",value:function(){return t.prototype.addListener.apply(t.prototype,arguments)}}]),t}(l.default);w.VERSION=j.default.version,t.default=w},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),s=r(i),a=function(e){if(s.access("./constants.json")){var t=s.read("./constants.json");s.isEqual(e._defaults,t)||(Object.assign(e._defaults,t),s.write("./constants.json",e._defaults))}else s.write("./constants.json",e._defaults);var n={},r={get:function(t,n){if("function"!=typeof n)throw new Error('"storage.get" expects a callback');if("object"===("undefined"==typeof t?"undefined":o(t))){var r=t,i={};for(var a in r){var c=s.read("./constants.json")[a];c?(e[a]=c,i[a]=c):(e[a]=r[a],i[a]=e[a])}return n(i)}if("string"==typeof t){var u={},f=s.read("./constants.json")[t];return f&&(u[t]=f),n(u)}},set:function(e,t){if("object"!==("undefined"==typeof e?"undefined":o(e)))throw new Error('"storage.set" expects an object');var n=s.read("./constants.json");for(var r in e)s.checkProperty(e,r)&&(n[r]=e[r]);s.write("./constants.json",n),t&&t()},remove:function(t,n){if("string"==typeof t){var r=s.read("./constants.json");delete r[t],delete e[t],s.write("./constants.json",r),n&&n()}else if("object"===("undefined"==typeof t?"undefined":o(t))){var i=t,a=s.read("./constants.json");for(var c in i)s.checkProperty(e,c)&&(delete a[c],delete e[c]);s.write("./constants.json",e),n&&n()}},clear:function(){for(var t in e)s.checkProperty(e,t)&&"function"!=typeof e[t]&&(this.remove(t),delete e[t])}};return n.local=r,n};t.default=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),s=r(i),a=function(e){if(s.isNumeric(e))e=parseFloat(e);else{if("`null"===e)return"null";s.isNull(e)?e=null:s.isBoolean(e)?e=e:s.isObject(e)&&(e=JSON.parse(e))}return e},c=function(e){if(s.isString(e)){if(s.isBoolean(e))return s.convertBool(e);if(s.isNull(e))return null}return e},u=function(e){var t={},n={get:function(e,t){if("function"!=typeof t)throw new Error('"storage.get" expects a callback');if("object"===("undefined"==typeof e?"undefined":o(e))){var n=e,r={};for(var i in n){var s=a(localStorage.getItem(i))||void 0;r[i]=c(s)}return t(r)}if("string"==typeof e){var u={};return u[e]=a(localStorage.getItem(e))||void 0,u[e]=c(u[e]),t(u)}},set:function(e,t){if("object"!==("undefined"==typeof e?"undefined":o(e)))throw new Error('"storage.set" expects an object');for(var n in e)s.isNull(e[n])?localStorage.setItem(n,"`null"):"object"===o(e[n])?localStorage.setItem(n,JSON.stringify(e[n])):localStorage.setItem(n,e[n]);t&&t()},remove:function(t,n){if("string"==typeof t)localStorage.removeItem(t),delete e[t],n&&n();else if("object"===("undefined"==typeof t?"undefined":o(t))){var r=t;for(var i in r)localStorage.removeItem(i),delete e[i];n&&n()}},clear:function(){for(var t in e)s.checkProperty(e,t)&&"function"!=typeof e[t]&&(localStorage.removeItem(t),delete e[t])}};return t.local=n,t};t.default=u},function(e,t){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e){if(null===e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e})},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var i=Object.prototype.hasOwnProperty,s="function"!=typeof Object.create&&"~";o.prototype._events=void 0,o.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)i.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},o.prototype.emit=function(e,t,n,r,o,i){var a=s?s+e:e;if(!this._events||!this._events[a])return!1;var c,u,f=this._events[a],l=arguments.length;if("function"==typeof f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,r),!0;case 5:return f.fn.call(f.context,t,n,r,o),!0;case 6:return f.fn.call(f.context,t,n,r,o,i),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];f.fn.apply(f.context,c)}else{var p,y=f.length;for(u=0;u<y;u++)switch(f[u].once&&this.removeListener(e,f[u].fn,void 0,!0),l){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,t);break;case 3:f[u].fn.call(f[u].context,t,n);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];f[u].fn.apply(f[u].context,c)}}return!0},o.prototype.on=function(e,t,n){var o=new r(t,n||this),i=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.once=function(e,t,n){var o=new r(t,n||this,!0),i=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.removeListener=function(e,t,n,r){var o=s?s+e:e;if(!this._events||!this._events[o])return this;var i=this._events[o],a=[];if(t)if(i.fn)(i.fn!==t||r&&!i.once||n&&i.context!==n)&&a.push(i);else for(var c=0,u=i.length;c<u;c++)(i[c].fn!==t||r&&!i[c].once||n&&i[c].context!==n)&&a.push(i[c]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[s?s+e:e]:this._events=s?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,e.exports=o},function(e,t){e.exports={name:"constant-fox",version:"0.0.8",description:"",main:"lib/constant-fox.min.js",files:["lib","src"],scripts:{clean:"rimraf lib dist",lint:"eslint src test",test:"karma start karma/karma.config.development.js","test:node":"find ./test -name '*.spec.js' | xargs -L 1 babel-node","test:teamcity":"karma start karma/karma.config.production.js","build:umd":"webpack src/constants.js --config webpack/webpack.config.development.js","build:umd:min":"webpack src/constants.js --config webpack/webpack.config.production.js",build:"npm run clean && npm run build:umd:min"},npmName:"constant-fox",author:"Ian Delairre <idelairre@gmail.com>",license:"MIT",repository:{type:"git",url:"git+https://github.com/idelairre/ConstantsFox"},bugs:{url:"https://github.com/idelairre/ConstantsFox/issues"},keywords:["constants"],devDependencies:{"babel-core":"^6.7.2","babel-eslint":"^4.1.0","babel-loader":"^6.2.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-class-properties":"^6.9.0","babel-preset-es2015":"^6.5.0","babel-preset-stage-0":"^6.5.0","babel-runtime":"^6.5.x",eslint:"^1.7.1",jasmine:"^2.4.1","jasmine-core":"^2.4.1","json-loader":"^0.5.4",karma:"^0.13.9","karma-chrome-launcher":"^1.0.1","karma-firefox-launcher":"^1.0.0","karma-htmlfile-reporter":"latest","karma-jasmine":"^0.3.8","karma-phantomjs-launcher":"latest","karma-teamcity-reporter":"latest","karma-webpack-with-fast-source-maps":"^1.10.0",phantomjs:"^2.1.3",rimraf:"^2.3.4",webpack:"^1.12.13"},dependencies:{"babel-cli":"^6.11.4"}}}])});
//# sourceMappingURL=constant-fox.min.js.map