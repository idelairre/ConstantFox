!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fs"),require("path")):"function"==typeof define&&define.amd?define("constants-fox",["fs","path"],t):"object"==typeof exports?exports["constants-fox"]=t(require("fs"),require("path")):e["constants-fox"]=t(e.fs,e.path)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(1)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),l=o(u),h=n(2),p=(o(h),n(3)),v=(o(p),n(4)),d=r(v);n(5);var y=function(e){function t(e){i(this,t);var n=s(this,Object.getPrototypeOf(t).call(this));return n._previous={},n.defaults={},n.storage={local:{},sync:{}},n.env=null,n.initialized=!1,Object.assign(n.defaults,e),n.once("ready",function(){n.set(e)}),n.detectContext(n.initialize.bind(n)),n}return a(t,e),f(t,[{key:"initialize",value:function(){var e=this;this._initializeStorageValues(function(){return e.initialized?void e.emit("reset"):(e.initialized=!0,void e.emit("ready"))})}},{key:"detectContext",value:function(e){if(d.isNode())this.storage=this.mockChromeApiWithFileSystem(),this.env="node";else if(d.isChromeExtension())this.storage.local=chrome.storage.local,this.env="chrome";else{if(!d.isBrowser())throw new Error("Cannot detect JavaScript context");this.storage=this.mockChromeApiWithLocalStorage(),this.env="browser"}if(e)return e()}},{key:"mockChromeApiWithFileSystem",value:function(){var e=this;return d.access("./constants.json")||d.write("./constants.json",this.defaults),{local:{get:function(t,n){if("function"!=typeof n)throw new Error('"storage.get" expects a callback');if("object"===("undefined"==typeof t?"undefined":c(t))){var r=t,o={};for(var i in r){var s=d.read("./constants.json")[i];s?o[i]=s:(e[i]=r[i],o[i]=e[i])}return n(o)}if("string"==typeof t){var a={},f=d.read("./constants.json")[t];return f&&(a[t]=f),n(a)}},set:function(e,t){if("object"!==("undefined"==typeof e?"undefined":c(e)))throw new Error('"storage.set" expects an object');var n=d.read("./constants.json");for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r]);d.write("./constants.json",n),t&&t()},remove:function(t,n){if("string"==typeof t){var r=d.read("./constants.json");delete r[t],delete e[t],d.write("./constants.json",r),n&&n()}else if("object"===("undefined"==typeof t?"undefined":c(t))){var o=t,i=d.read("./constants.json");for(var s in o)({}).hasOwnProperty.call(e,s)&&(delete i[s],delete e[s]);d.write("./constants.json",e),n&&n()}},clear:function(){for(var t in e)({}).hasOwnProperty.call(e,t)&&"function"!=typeof e[t]&&(this.remove(t),delete e[t])}}}}},{key:"mockChromeApiWithLocalStorage",value:function(){var e=this;return{local:{get:function(e,t){if("function"!=typeof t)throw new Error('"storage.get" expects a callback');if("object"===("undefined"==typeof e?"undefined":c(e))){var n=e,r={};for(var o in n){var i=localStorage.getItem(o);r[o]=i}return t(r)}if("string"==typeof e){var s={};return s[e]=localStorage.getItem(e),t(s)}},set:function(e,t){if("object"!==("undefined"==typeof e?"undefined":c(e)))throw new Error('"storage.set" expects an object');for(var n in e)({}).hasOwnProperty.call(e,n)&&localStorage.setItem(n,e[n]);t&&t()},remove:function(t,n){if("string"==typeof t)localStorage.removeItem(t),delete e[t],n&&n();else if("object"===("undefined"==typeof t?"undefined":c(t))){var r=t;for(var o in r)localStorage.removeItem(o),delete e[o];n&&n()}},clear:function(){for(var t in e)({}).hasOwnProperty.call(e,t)&&"function"!=typeof e[t]&&(localStorage.removeItem(t),delete e[t])}}}}},{key:"clear",value:function(){this.storage.local.clear()}},{key:"get",value:function(e){if("object"===("undefined"==typeof e?"undefined":c(e))){var t={},n=e;for(var r in n)({}).hasOwnProperty.call(n,r)&&this[r]&&(t[r]=this[r]);return t}if("string"==typeof e)return this[e]}},{key:"set",value:function(e,t){if("object"===("undefined"==typeof e?"undefined":c(e)))this._assign(e),this.storage.local.set(e);else{this[e]=t;var n={};n[e]=t,this.storage.local.set(n)}this.emit("change",this.toJSON)}},{key:"remove",value:function(e){return this.storage.local.remove(e)}},{key:"previous",value:function(e){return e?this._previous[e]:this._previous}},{key:"reset",value:function(){this.set(this.defaults),this.initialize()}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this.defaults).forEach(function(n){t[n]=e[n]}),Object.assign({},t)}},{key:"_assign",value:function(e){for(var t in e)({}).hasOwnProperty.call(e,t)&&("undefined"==typeof this.key?this._previous[t]=e[t]:this._previous[t]=this[t],this[t]=e[t])}},{key:"_initializeStorageValues",value:function(e){var t=this;this.storage.local.get(this.defaults,function(n){Object.assign(t,n),e&&e()})}}]),t}(l["default"]);t["default"]=y},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.access=t.read=t.write=t.isChromeExtension=t.storageEnabled=t.isNode=t.isChrome=t.isBrowser=void 0;var o=n(2),i=r(o),s=n(3),a=r(s),c=t.isBrowser=new Function("try {return window;}catch(e){ return false;}"),f=t.isChrome=new Function("try {return ('chrome' in window);}catch(e){return false;}"),u=(t.isNode=new Function("try {return process.title;}catch(e){return false;}"),t.storageEnabled=new Function("typeof chrome.storage !== 'undefined'"));t.isChromeExtension=function(){return c()&&f()&&u()},t.write=function(e,t){"string"!=typeof t&&(t=JSON.stringify(t));var n=a["default"].join(process.cwd(),e);i["default"].writeFileSync(n,t,"utf8")},t.read=function(e){return JSON.parse(i["default"].readFileSync(a["default"].join(process.cwd(),e)))},t.access=function(e){try{a["default"].join(process.cwd(),e);if(i["default"].statSync(e))return!0}catch(t){return!1}}},function(e,t){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e){if(null===e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e})},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var i=Object.prototype.hasOwnProperty,s="function"!=typeof Object.create&&"~";o.prototype._events=void 0,o.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)i.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},o.prototype.emit=function(e,t,n,r,o,i){var a=s?s+e:e;if(!this._events||!this._events[a])return!1;var c,f,u=this._events[a],l=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,i),!0}for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];u.fn.apply(u.context,c)}else{var h,p=u.length;for(f=0;f<p;f++)switch(u[f].once&&this.removeListener(e,u[f].fn,void 0,!0),l){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,t);break;case 3:u[f].fn.call(u[f].context,t,n);break;default:if(!c)for(h=1,c=new Array(l-1);h<l;h++)c[h-1]=arguments[h];u[f].fn.apply(u[f].context,c)}}return!0},o.prototype.on=function(e,t,n){var o=new r(t,n||this),i=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.once=function(e,t,n){var o=new r(t,n||this,(!0)),i=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.removeListener=function(e,t,n,r){var o=s?s+e:e;if(!this._events||!this._events[o])return this;var i=this._events[o],a=[];if(t)if(i.fn)(i.fn!==t||r&&!i.once||n&&i.context!==n)&&a.push(i);else for(var c=0,f=i.length;c<f;c++)(i[c].fn!==t||r&&!i[c].once||n&&i[c].context!==n)&&a.push(i[c]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[s?s+e:e]:this._events=s?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,e.exports=o}])});
//# sourceMappingURL=constants-fox.min.js.map